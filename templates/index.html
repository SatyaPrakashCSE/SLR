<!DOCTYPE html>
<html>
<head>
    <title>Sign Language Recognition</title>
</head>

<body style="text-align:center; font-family:Arial; background:white; color:black;">

<h1>Sign Language Recognition</h1>

<div style="width:70%; margin:auto; padding:10px; border:1px solid black;">
    <strong>NOTE:</strong> THIS MODEL IS UNDER DEVELOPMENT AND ONLY RECOGNIZES
    A, M, N, S, T FROM THE AMERICAN SIGN LANGUAGE DATASET.
    TO ADD MORE SIGNS PLEASE REFER TO README.MD
</div>

<br>
<button onclick="startCamera()">Start Webcam</button>

<br><br>

<canvas id="canvas" width="640" height="480" style="border:1px solid black;"></canvas>

<!-- PREDICTION TEXT BOX -->
<div id="predictionBox" style="
    margin:20px auto;
    padding:10px;
    width:300px;
    border:1px solid black;
    font-size:20px;
">
    Prediction will appear here
</div>

<script>
let video = document.createElement("video");
let canvas = document.getElementById("canvas");
let ctx = canvas.getContext("2d");
let predictionBox = document.getElementById("predictionBox");
let intervalId = null;

function startCamera() {
    navigator.mediaDevices.getUserMedia({ video: true })
        .then(stream => {
            video.srcObject = stream;
            video.play();

            if (!intervalId) {
                intervalId = setInterval(captureFrame, 800);
            }
        });
}

function captureFrame() {
    ctx.drawImage(video, 0, 0, canvas.width, canvas.height);

    let imageData = canvas.toDataURL("image/jpeg");

    fetch("/predict", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ image: imageData })
    })
    .then(res => res.json())
    .then(data => {
        if (data.label !== "blank") {
            predictionBox.innerText =
                `Predicted Sign: ${data.label} (${data.confidence}%)`;
        } else {
            predictionBox.innerText = "No sign detected";
        }
    });
}
</script>

</body>
</html>
